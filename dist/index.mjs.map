{"version":3,"file":"index.mjs","sources":["../lib/PSPoint.js","../lib/utils.js","../lib/PressureManager.js","../lib/Simplify.js","../lib/PSSimplify.js","../lib/PSStroke.js","../lib/PSBrush.js","../lib/index.js"],"sourcesContent":["import { fabric } from \"fabric\";\n\nclass PSPoint extends fabric.Point {\n  constructor(x, y, pressure) {\n    super(x, y);\n    this.type = \"PSPoint\";\n    this.pressure = pressure;\n  }\n  midPointFrom(p) {\n    const mid = super.midPointFrom(p);\n    return new PSPoint(mid.x, mid.y, (this.pressure + p.pressure) / 2);\n  }\n  clone() {\n    return new PSPoint(this.x, this.y, this.pressure);\n  }\n}\n\nPSPoint[\"fromObject\"] = function (object, callback) {\n  callback && callback(new PSPoint(object.x, object.y, object.pressure));\n};\n\nfabric[\"PSPoint\"] = PSPoint;\n\nif (fabric.util && fabric.util.registerClass) {\n  fabric.util.registerClass(PSPoint, \"PSPoint\");\n} else if (fabric.ClassRegistry) {\n  fabric.ClassRegistry.register(PSPoint, \"PSPoint\");\n}\n\nexport default PSPoint;\n","import PSPoint from \"./PSPoint\";\n\nexport function isPSStroke(object) {\n  return object && object[\"type\"] === \"PSStroke\";\n}\n\nexport function isPSPoint(object) {\n  return object && object[\"type\"] === \"PSPoint\";\n}\n\nexport function getPressure(ev, fallbackValue = 0.5) {\n  if (ev[\"touches\"] && ev[\"touches\"].length > 0) {\n    return ev.touches[0].force;\n  }\n  if (ev[\"pointerType\"] === \"mouse\" || typeof ev[\"pressure\"] !== \"number\") {\n    return fallbackValue;\n  }\n  if (ev[\"pointerType\"] === \"touch\" && ev.pressure === 0) {\n    return fallbackValue;\n  }\n  return ev.pressure;\n}\n\nexport function createFabricClass(Parent, methods) {\n  function Class() {\n    const instance = Object.create(Parent.prototype);\n    Object.assign(instance, methods);\n    instance.callSuper = function (methodName, ...args) {\n      const parentMethod = Parent.prototype[methodName];\n      if (typeof parentMethod === \"function\") {\n        return parentMethod.apply(this, args);\n      }\n    };\n    if (instance.initialize) {\n      instance.initialize.apply(instance, arguments);\n    }\n    return instance;\n  }\n  Class.prototype = Object.create(Parent.prototype);\n  Object.assign(Class.prototype, methods);\n  Class.prototype.constructor = Class;\n  Class.prototype.callSuper = function (methodName, ...args) {\n    const parentMethod = Parent.prototype[methodName];\n    if (typeof parentMethod === \"function\") {\n      return parentMethod.apply(this, args);\n    }\n  };\n  return Class;\n}\n","import { fabric } from \"fabric\";\nimport PSPoint from \"./PSPoint\";\nimport { getPressure } from \"./utils\";\n\nclass PressureManager {\n  constructor(brush) {\n    this.min = 0.0001;\n    this.magic = 0.07999999821186066;\n    this.fallback = 0.1;\n    this.brush = brush;\n  }\n\n  onMouseDown(ev) {\n    const pressure = getPressure(ev, this.fallback);\n    return pressure === this.magic ? this.min : pressure;\n  }\n\n  onMouseMove(ev, points) {\n    const pressure = getPressure(ev, this.fallback);\n    const pressureShouldBeIgnored =\n      this.brush.pressureIgnoranceOnStart >\n      Date.now() - this.brush.currentStartTime;\n    const hasPreviousPressureValues =\n      Array.isArray(points) && points.length > 0;\n    const lastPressure = hasPreviousPressureValues\n      ? points[points.length - 1].pressure\n      : this.min;\n\n    const updatedPressure = pressureShouldBeIgnored\n      ? this.min\n      : pressure === this.magic\n        ? lastPressure\n        : Math.max(this.min, pressure);\n\n    if (\n      !pressureShouldBeIgnored &&\n      hasPreviousPressureValues &&\n      lastPressure === this.min &&\n      updatedPressure !== this.min\n    ) {\n      points.forEach(\n        (p) => (p.pressure = Math.max(p.pressure, updatedPressure)),\n      );\n      this.brush[\"_redrawSegments\"](points);\n    }\n    return updatedPressure;\n  }\n\n  onMouseUp() {}\n}\n\nfabric[\"PressureManager\"] = PressureManager;\nexport default PressureManager;\n","class Simplify {\n  set tolerance(tolerance) {\n    if (typeof tolerance !== \"number\") {\n      tolerance = 1;\n    }\n    this._tolerance = tolerance;\n    this.sqTolerance = tolerance * tolerance;\n  }\n  get tolerance() {\n    return this._tolerance;\n  }\n\n  constructor() {\n    this._tolerance = 1;\n    this.sqTolerance = 1;\n  }\n\n  getSquareDistance(p1, p2) {\n    let dx = p1.x - p2.x;\n    let dy = p1.y - p2.y;\n    return dx * dx + dy * dy;\n  }\n\n  getSquareSegmentDistance(p, p1, p2) {\n    let x = p1.x;\n    let y = p1.y;\n    let dx = p2.x - x;\n    let dy = p2.y - y;\n\n    if (dx !== 0 || dy !== 0) {\n      let t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);\n\n      if (t > 1) {\n        x = p2.x;\n        y = p2.y;\n      } else if (t > 0) {\n        x += dx * t;\n        y += dy * t;\n      }\n    }\n\n    dx = p.x - x;\n    dy = p.y - y;\n\n    return dx * dx + dy * dy;\n  }\n\n  simplifyRadialDistance(points) {\n    let prevPoint = points[0];\n    let newPoints = [prevPoint];\n    let point;\n\n    for (let i = 1, len = points.length; i < len; i++) {\n      point = points[i];\n\n      if (this.getSquareDistance(point, prevPoint) > this.sqTolerance) {\n        newPoints.push(point);\n        prevPoint = point;\n      }\n    }\n\n    if (prevPoint !== point) {\n      newPoints.push(point);\n    }\n\n    return newPoints;\n  }\n\n  simplifyDouglasPeucker(points) {\n    let len = points.length;\n    let MarkerArray = typeof Uint8Array !== \"undefined\" ? Uint8Array : Array;\n    let markers = new MarkerArray(len);\n    let first = 0;\n    let last = len - 1;\n    let stack = [];\n    let newPoints = [];\n    let i;\n    let maxSqDist;\n    let sqDist;\n    let index;\n\n    markers[first] = markers[last] = 1;\n\n    while (last) {\n      maxSqDist = 0;\n\n      for (i = first + 1; i < last; i++) {\n        sqDist = this.getSquareSegmentDistance(\n          points[i],\n          points[first],\n          points[last],\n        );\n\n        if (sqDist > maxSqDist) {\n          index = i;\n          maxSqDist = sqDist;\n        }\n      }\n\n      if (maxSqDist > this.sqTolerance) {\n        markers[index] = 1;\n        stack.push(first, index, index, last);\n      }\n\n      last = stack.pop();\n      first = stack.pop();\n    }\n\n    for (i = 0; i < len; i++) {\n      if (markers[i]) {\n        newPoints.push(points[i]);\n      }\n    }\n\n    return newPoints;\n  }\n\n  do(points, highestQuality) {\n    points = highestQuality ? points : this.simplifyRadialDistance(points);\n    points = this.simplifyDouglasPeucker(points);\n    return points;\n  }\n}\n\nexport default Simplify;\n","import Simplify from \"./Simplify\";\nimport PSPoint from \"./PSPoint\";\n\nclass PSSimplify extends Simplify {\n  constructor() {\n    super();\n    this.pressureCoeff = 100;\n  }\n\n  getSquareDistance(p1, p2) {\n    var dx = p1.x - p2.x;\n    var dy = p1.y - p2.y;\n    var dz = p1.pressure - p2.pressure;\n\n    return dx * dx + dy * dy + dz * dz * this.pressureCoeff;\n  }\n\n  getSquareSegmentDistance(p, p1, p2) {\n    var x = p1.x;\n    var y = p1.y;\n    var z = p1.pressure;\n    var dx = p2.x - x;\n    var dy = p2.y - y;\n    var dz = p2.pressure - z;\n\n    if (dx !== 0 || dy !== 0 || dz !== 0) {\n      var t =\n        ((p.x - x) * dx +\n          (p.y - y) * dy +\n          (p.pressure - z) * dz * this.pressureCoeff) /\n        (dx * dx + dy * dy + dz * dz * this.pressureCoeff);\n\n      if (t > 1) {\n        x = p2.x;\n        y = p2.y;\n        z = p2.pressure;\n      } else if (t > 0) {\n        x += dx * t;\n        y += dy * t;\n        z += dz * t;\n      }\n    }\n\n    dx = p.x - x;\n    dy = p.y - y;\n    dz = p.pressure - z;\n\n    return dx * dx + dy * dy + dz * dz * this.pressureCoeff;\n  }\n}\n\nexport default PSSimplify;\n","import { fabric } from \"fabric\";\nimport PSPoint from \"./PSPoint\";\nimport { createFabricClass } from \"./utils\";\n\nconst util = fabric.util;\nconst extend = util.object.extend;\n\nconst createClass =\n  fabric.util.createClass ||\n  (fabric.util.lang_class && fabric.util.lang_class.createClass) ||\n  createFabricClass;\n\nconst PSStrokeImpl = createClass(fabric.Object, {\n  type: \"PSStroke\",\n  strokePoints: null,\n  startTime: null,\n  endTime: null,\n\n  cacheProperties: fabric.Object.prototype.cacheProperties.concat(\n    \"strokePoints\",\n    \"startTime\",\n    \"endTime\",\n    \"fillRule\",\n  ),\n\n  stateProperties: fabric.Object.prototype.stateProperties.concat(\n    \"strokePoints\",\n    \"startTime\",\n    \"endTime\",\n  ),\n\n  initialize: function (strokePoints, options) {\n    options = options || {};\n    this.callSuper(\"initialize\", options);\n\n    this.startTime = options.startTime;\n    this.endTime = options.endTime;\n    this.strokePoints = (strokePoints || []).concat();\n\n    if (options.stroke !== undefined) {\n      this.stroke = options.stroke;\n    }\n    if (options.strokeWidth !== undefined) {\n      this.strokeWidth = options.strokeWidth;\n    }\n\n    this._setPositionDimensions(options);\n  },\n\n  _setPositionDimensions: function (options) {\n    var calcDim = this._parseDimensions();\n    this.width = calcDim.width;\n    this.height = calcDim.height;\n\n    if (\n      typeof options.left == \"undefined\" &&\n      typeof options.top == \"undefined\"\n    ) {\n      this.left = calcDim.left;\n      this.top = calcDim.top;\n    }\n    this.strokeOffset = this.strokeOffset || {\n      x: calcDim.left + this.width / 2,\n      y: calcDim.top + this.height / 2,\n    };\n  },\n\n  _renderStroke: function (ctx) {\n    let i;\n    let strokeWidth = this.strokeWidth / 1000;\n    let p1 = this.strokePoints[0];\n    let p2 = this.strokePoints[1];\n    let len = this.strokePoints.length;\n    let l = -this.strokeOffset.x;\n    let t = -this.strokeOffset.y;\n\n    if (len === 2 && !(p1.x === p2.x && p1.y === p2.y)) {\n      ctx.strokeStyle = this.stroke;\n      ctx.lineCap = this.strokeLineCap;\n      ctx.lineJoin = this.strokeLineJoin;\n      ctx.lineWidth = this.strokeWidth;\n      ctx.beginPath();\n      ctx.moveTo(p1.x + l, p1.y + t);\n      ctx.lineTo(p2.x + l, p2.y + t);\n      ctx.stroke();\n      return;\n    }\n\n    let mid = p1;\n    let multSignX = 1;\n    let multSignY = 1;\n    let manyPoints = len > 2;\n\n    if (manyPoints) {\n      multSignX =\n        this.strokePoints[2].x < p2.x\n          ? -1\n          : this.strokePoints[2].x === p2.x\n            ? 0\n            : 1;\n      multSignY =\n        this.strokePoints[2].y < p2.y\n          ? -1\n          : this.strokePoints[2].y === p2.y\n            ? 0\n            : 1;\n    }\n\n    if (this.strokePoints.length === 2 && p1.x === p2.x && p1.y === p2.y) {\n      p1 = new PSPoint(p1.x, p1.y, p1.pressure);\n      p2 = new PSPoint(p2.x, p2.y, p2.pressure);\n      p1.x -= strokeWidth;\n      p2.x += strokeWidth;\n      mid.x = p1.x;\n    }\n\n    ctx.strokeStyle = this.stroke;\n    ctx.lineCap = this.strokeLineCap;\n    ctx.lineJoin = this.strokeLineJoin;\n\n    for (i = 1, len = this.strokePoints.length; i < len; i++) {\n      ctx.beginPath();\n      ctx.moveTo(\n        mid.x - multSignX * strokeWidth + l,\n        mid.y - multSignY * strokeWidth + t,\n      );\n      ctx.lineWidth = p1.pressure * this.strokeWidth;\n      mid = p1.midPointFrom(p2);\n      ctx.quadraticCurveTo(\n        p1.x - multSignX * strokeWidth + l,\n        p1.y - multSignY * strokeWidth + t,\n        mid.x - multSignX * strokeWidth + l,\n        mid.y - multSignY * strokeWidth + t,\n      );\n      p1 = this.strokePoints[i];\n      p2 = this.strokePoints[i + 1];\n\n      ctx.stroke();\n    }\n  },\n\n  _render: function (ctx) {\n    this._renderStroke(ctx);\n    this._renderPaintInOrder(ctx);\n  },\n\n  toString: function () {\n    return (\n      \"#<Stroke (\" +\n      this.complexity() +\n      '): { \"top\": ' +\n      this.top +\n      ', \"left\": ' +\n      this.left +\n      \" }>\"\n    );\n  },\n\n  toObject: function (propertiesToInclude) {\n    var o = extend(this.callSuper(\"toObject\", propertiesToInclude), {\n      strokePoints: this.strokePoints.map((i) => i.clone()),\n      startTime: this.startTime,\n      endTime: this.endTime,\n      top: this.top,\n      left: this.left,\n    });\n    return o;\n  },\n\n  _toSVG: function () {\n    const svgString = [\n      '<g transform=\"translate(',\n      String(-this.strokeOffset.x),\n      \",\",\n      String(-this.strokeOffset.y),\n      ')\" ',\n      \"COMMON_PARTS\",\n      \">\\n\",\n    ];\n    let p1 = null;\n    for (let i = 0; i < this.strokePoints.length; i++) {\n      let p2 = this.strokePoints[i];\n      if (p1) {\n        const x1 = p1.x;\n        const y1 = p1.y;\n        const x2 = p2.x;\n        const y2 = p2.y;\n        svgString.push(\n          \"<line \",\n          'x1=\"',\n          String(x1),\n          '\" y1=\"',\n          String(y1),\n          '\" x2=\"',\n          String(x2),\n          '\" y2=\"',\n          String(y2),\n          '\" ',\n          'stroke-width=\"',\n          String(p1.pressure * this.strokeWidth),\n          '\" ',\n          'stroke-linecap=\"round\" />\\n',\n        );\n      }\n      p1 = p2;\n    }\n    svgString.push(\"</g>\\n\");\n    return svgString;\n  },\n\n  toClipPathSVG: function (reviver) {\n    return (\n      \"\\t\" +\n      this._createBaseClipPathSVGMarkup(this._toSVG(), {\n        reviver: reviver,\n      })\n    );\n  },\n\n  toSVG: function (reviver) {\n    return this._createBaseSVGMarkup(this._toSVG(), {\n      reviver: reviver,\n    });\n  },\n\n  complexity: function () {\n    return this.strokePoints.length;\n  },\n\n  _parseDimensions: function () {\n    function DummyCtx() {\n      this.bounds = [];\n      this.aX = [];\n      this.aY = [];\n      this.x = 0;\n      this.y = 0;\n    }\n    DummyCtx.prototype._done = function () {\n      this.bounds.forEach((point) => {\n        this.aX.push(point.x);\n        this.aY.push(point.y);\n      });\n      this.aX.push(this.x);\n      this.aY.push(this.y);\n    };\n    DummyCtx.prototype.moveTo = function (x, y) {\n      this.x = x;\n      this.y = y;\n      this.bounds = [];\n      this._done();\n    };\n    DummyCtx.prototype.quadraticCurveTo = function (ctlX, ctlY, x, y) {\n      this.bounds = util.getBoundsOfCurve(\n        this.x,\n        this.y,\n        ctlX,\n        ctlY,\n        ctlX,\n        ctlY,\n        x,\n        y,\n      );\n      this.x = x;\n      this.y = y;\n      this._done();\n    };\n    DummyCtx.prototype.calcBounds = function () {\n      var minX = Math.min(...this.aX) || 0;\n      var minY = Math.min(...this.aY) || 0;\n      var maxX = Math.max(...this.aX) || 0;\n      var maxY = Math.max(...this.aY) || 0;\n      var deltaX = maxX - minX;\n      var deltaY = maxY - minY;\n\n      return {\n        left: minX,\n        top: minY,\n        width: deltaX,\n        height: deltaY,\n      };\n    };\n\n    var ctx = new DummyCtx();\n    var i;\n    var len;\n    var p1 = this.strokePoints[0];\n    var p2 = this.strokePoints[1];\n\n    if (this.strokePoints.length === 2 && !(p1.x === p2.x && p1.y === p2.y)) {\n      ctx.aX.push(p1.x, p1.x, p2.x, p2.x);\n      ctx.aY.push(p1.y, p1.y, p2.y, p2.y);\n      ctx.lineWidth = this.strokeWidth / 3;\n      return ctx.calcBounds();\n    }\n\n    var mid = p1;\n\n    for (i = 1, len = this.strokePoints.length; i < len; i++) {\n      ctx.moveTo(mid.x, mid.y);\n      ctx.lineWidth = p1.pressure * this.strokeWidth;\n      mid = p1.midPointFrom(p2);\n      ctx.quadraticCurveTo(p1.x, p1.y, mid.x, mid.y);\n\n      p1 = this.strokePoints[i];\n      p2 = this.strokePoints[i + 1];\n    }\n\n    return ctx.calcBounds();\n  },\n});\n\nconst PSStroke = PSStrokeImpl;\n\nPSStroke.fromObject = function (object, callback) {\n  if (!callback) {\n    console.warn(\"PSStroke.fromObject: callback is required\");\n    return;\n  }\n\n  function enlivenStrokePoints(strokePoints, cb) {\n    if (!strokePoints || strokePoints.length === 0) {\n      cb([]);\n      return;\n    }\n\n    const filteredPoints = strokePoints.filter((p) => p != null);\n\n    if (filteredPoints.length === 0) {\n      cb([]);\n      return;\n    }\n\n    const results = [];\n    let processed = 0;\n    const total = filteredPoints.length;\n\n    filteredPoints.forEach((obj, index) => {\n      if (!obj) {\n        results[index] = obj;\n        processed++;\n        if (processed === total) {\n          return cb(results);\n        }\n      } else if (obj.type === \"PSPoint\" && PSPoint.fromObject) {\n        PSPoint.fromObject(obj, (point) => {\n          results[index] = point;\n          processed++;\n          if (processed === total) {\n            return cb(results);\n          }\n        });\n      } else {\n        results[index] = obj;\n        processed++;\n        if (processed === total) {\n          return cb(results);\n        }\n      }\n    });\n  }\n\n  function processPatterns(cb) {\n    const originalStroke = object.stroke;\n    const originalFill = object.fill;\n\n    if (util.enlivenPatterns) {\n      util.enlivenPatterns([object.fill, object.stroke], function (patterns) {\n        if (patterns) {\n          object.fill = patterns[0] !== undefined ? patterns[0] : originalFill;\n          object.stroke =\n            patterns[1] !== undefined ? patterns[1] : originalStroke;\n        } else {\n          object.fill = originalFill;\n          object.stroke = originalStroke;\n        }\n        cb();\n      });\n    } else {\n      cb();\n    }\n  }\n\n  function processClipPath(cb) {\n    if (!object.clipPath) {\n      cb(null);\n      return;\n    }\n\n    if (util.enlivenObjects) {\n      util.enlivenObjects(\n        [object.clipPath],\n        function (enlived) {\n          cb(enlived && enlived.length > 0 ? enlived[0] : null);\n        },\n        null,\n        null,\n      );\n    } else {\n      cb(object.clipPath);\n    }\n  }\n\n  processPatterns(function () {\n    processClipPath(function (clipPath) {\n      object.clipPath = clipPath;\n      enlivenStrokePoints(\n        object[\"strokePoints\"] || [],\n        function (strokePoints) {\n          const instance = new PSStroke(strokePoints, object);\n          if (!instance.stroke && object.stroke) {\n            instance.stroke = object.stroke;\n          }\n          callback(instance);\n        },\n      );\n    });\n  });\n};\n\nfabric[\"PSStroke\"] = PSStroke;\nexport default PSStroke;\n","import { fabric } from \"fabric\";\n\nimport PSSimplify from \"./PSSimplify\";\nimport PressureManager from \"./PressureManager\";\nimport PSStroke from \"./PSStroke\";\nimport PSPoint from \"./PSPoint\";\nimport { createFabricClass } from \"./utils\";\n\nconst createClass =\n  fabric.util.createClass ||\n  (fabric.util.lang_class && fabric.util.lang_class.createClass) ||\n  createFabricClass;\n\nconst PSBrushImpl = createClass(fabric.BaseBrush, {\n  simplify: null,\n  pressureManager: null,\n  pressureCoeff: 100,\n  simplifyTolerance: 0,\n  simplifyHighestQuality: false,\n  pressureIgnoranceOnStart: -1,\n  opacity: 1,\n  disableTouch: false,\n  currentStartTime: null,\n  disablePressure: false,\n\n  initialize: function (canvas) {\n    this.simplify = new PSSimplify();\n    this.pressureManager = new PressureManager(this);\n    this.canvas = canvas;\n    this._points = [];\n  },\n\n  _drawSegment: function (ctx, p1, p2) {\n    var midPoint = p1.midPointFrom(p2);\n    ctx.lineWidth = p1.pressure * this.width;\n    ctx.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\n    return midPoint;\n  },\n\n  onMouseDown: function (pointer, ev) {\n    const p = ev ? ev.pointer : pointer;\n    const e = ev ? ev.e : pointer[\"e\"] || null;\n    if (this.disableTouch && e && (e.touches || e.pointerType === \"touch\")) {\n      return;\n    }\n\n    this.drawStraightLine = e && e.shiftKey === true;\n    this.disablePressure = e && (e.ctrlKey === true || e.metaKey === true);\n    this._prepareForDrawing(p, e);\n    this._captureDrawingPath(p, e);\n    this._render();\n  },\n\n  onMouseMove: function (pointer, ev) {\n    const p = ev ? ev.pointer : pointer;\n    const e = ev ? ev.e : pointer[\"e\"] || null;\n    if (this.disableTouch && e && (e.touches || e.pointerType === \"touch\")) {\n      return;\n    }\n\n    this.drawStraightLine = e && e.shiftKey === true;\n    this.disablePressure = e && (e.ctrlKey === true || e.metaKey === true);\n    if (this._captureDrawingPath(p, e) && this._points.length > 1) {\n      if (this.needsFullRender || this.drawStraightLine) {\n        this.canvas.clearContext(this.canvas.contextTop);\n        this._render();\n      } else {\n        const points = this._points;\n        const length = points.length;\n        const ctx = this.canvas.contextTop;\n\n        this._saveAndTransform(ctx);\n        if (this.oldEnd) {\n          ctx.beginPath();\n          ctx.moveTo(this.oldEnd.x, this.oldEnd.y);\n        }\n        this.oldEnd = this._drawSegment(\n          ctx,\n          points[length - 2],\n          points[length - 1],\n          true,\n        );\n        ctx.stroke();\n        ctx.restore();\n      }\n    }\n  },\n\n  onMouseUp: function (ev) {\n    const e = ev && ev.e ? ev.e : null;\n    if (this.disableTouch && e && (e.touches || e.pointerType === \"touch\")) {\n      return;\n    }\n\n    this.oldEnd = undefined;\n    this._finalizeAndAddPath();\n    this.pressureManager.onMouseUp();\n  },\n\n  _prepareForDrawing: function (pointer, ev) {\n    let pressure = this.pressureManager.onMouseDown(ev);\n    if (this.disablePressure) {\n      pressure = 1.0;\n    }\n    const p = new PSPoint(pointer.x, pointer.y, pressure);\n\n    this._reset();\n    this._addPoint(p);\n    this.canvas.contextTop.moveTo(p.x, p.y);\n\n    this.currentStartTime = Date.now();\n  },\n\n  _addPoint: function (point) {\n    if (\n      this._points.length > 1 &&\n      point.eq(this._points[this._points.length - 1])\n    ) {\n      return false;\n    }\n    if (this.drawStraightLine && this._points.length > 1) {\n      this._hasStraightLine = true;\n      this._points.pop();\n    }\n    this._points.push(point);\n    return true;\n  },\n\n  _reset: function () {\n    const ctx = this.canvas.contextTop;\n    this._points.length = 0;\n    this._setBrushStyles(ctx);\n    var color = new fabric.Color(this.color);\n    this.needsFullRender = color.getAlpha() < 1;\n    this._setShadow();\n  },\n\n  _captureDrawingPath: function (pointer, ev) {\n    let pressure = this.pressureManager.onMouseMove(ev, this._points);\n    if (this.disablePressure) {\n      pressure = 1.0;\n    }\n    const pointerPoint = new PSPoint(pointer.x, pointer.y, pressure);\n    return this._addPoint(pointerPoint);\n  },\n\n  _redrawSegments: function (points) {\n    const ctx = this.canvas.contextTop;\n    this._saveAndTransform(ctx);\n    if (this.oldEnd) {\n      ctx.closePath();\n    }\n    let p = this._points[0];\n    ctx.moveTo(p.x, p.y);\n    ctx.beginPath();\n    this._points.forEach((p2) => {\n      this.oldEnd = this._drawSegment(ctx, p, p2, true);\n      p = p2;\n    });\n    ctx.stroke();\n    ctx.restore();\n  },\n\n  _render: function () {\n    var ctx = this.canvas.contextTop;\n    var i;\n    var len;\n    var p1 = this._points[0];\n    var p2 = this._points[this._points.length - 1];\n    var mid = p1;\n\n    this._saveAndTransform(ctx);\n\n    if (this.drawStraightLine && this._points.length >= 2) {\n      const compositeOperation = ctx.globalCompositeOperation;\n      const alpha = ctx.globalAlpha;\n      ctx.globalCompositeOperation = \"destination-atop\";\n      ctx.globalAlpha = this.opacity;\n      ctx.beginPath();\n      ctx.moveTo(p1.x, p1.y);\n      ctx.lineWidth = this.width;\n      ctx.lineTo(p2.x, p2.y);\n      ctx.stroke();\n      ctx.restore();\n      ctx.globalCompositeOperation = compositeOperation;\n      ctx.globalAlpha = alpha;\n      return;\n    }\n\n    if (this._points.length === 2 && p1.x === p2.x && p1.y === p2.y) {\n      var width = (p1.pressure * this.width) / 1000;\n      p1 = new PSPoint(p1.x, p1.y, p1.pressure);\n      p2 = new PSPoint(p2.x, p2.y, p2.pressure);\n      p1.x -= width;\n      p2.x += width;\n      mid.x = p1.x;\n    }\n\n    p1 = this._points[0];\n    p2 = this._points[1];\n    mid = p1;\n\n    const compositeOperation = ctx.globalCompositeOperation;\n    const alpha = ctx.globalAlpha;\n    ctx.globalCompositeOperation = \"destination-atop\";\n    ctx.globalAlpha = this.opacity;\n    for (i = 1, len = this._points.length; i < len; i++) {\n      ctx.beginPath();\n      ctx.moveTo(mid.x, mid.y);\n      mid = this._drawSegment(ctx, p1, p2);\n      ctx.closePath();\n      ctx.stroke();\n      p1 = this._points[i];\n      p2 = this._points[i + 1];\n    }\n    ctx.restore();\n    ctx.globalCompositeOperation = compositeOperation;\n    ctx.globalAlpha = alpha;\n  },\n\n  convertPointsToSVGPath: function (points) {\n    var path = [];\n    var i;\n    var width = this.width / 1000;\n    var len = points.length;\n\n    var p1 = new PSPoint(points[0].x, points[0].y, points[0].pressure);\n    var p2 = new PSPoint(points[1].x, points[1].y, points[1].pressure);\n    var mid = p1;\n    var multSignX = 1;\n    var multSignY = 1;\n    var manyPoints = len > 2;\n\n    if (manyPoints) {\n      multSignX = points[2].x < p2.x ? -1 : points[2].x === p2.x ? 0 : 1;\n      multSignY = points[2].y < p2.y ? -1 : points[2].y === p2.y ? 0 : 1;\n    }\n    for (i = 1; i < len; i++) {\n      path.push(\n        \"M \",\n        mid.x - multSignX * width,\n        \" \",\n        mid.y - multSignY * width,\n        \" \",\n      );\n      if (!p1.eq(p2)) {\n        mid = p1.midPointFrom(p2);\n        path.push(\"Q \", p1.x, \" \", p1.y, \" \", mid.x, \" \", mid.y, \" \");\n      }\n      p1 = points[i];\n      if (i + 1 < points.length) {\n        p2 = points[i + 1];\n      }\n    }\n    if (manyPoints) {\n      multSignX =\n        p1.x > points[i - 2].x ? 1 : p1.x === points[i - 2].x ? 0 : -1;\n      multSignY =\n        p1.y > points[i - 2].y ? 1 : p1.y === points[i - 2].y ? 0 : -1;\n    }\n    path.push(\"L \", p1.x + multSignX * width, \" \", p1.y + multSignY * width);\n    return path;\n  },\n\n  createPSStroke: function (points) {\n    var path = new PSStroke(points, {\n      fill: null,\n      stroke: this.color,\n      strokeWidth: this.width,\n      strokeLineCap: this.strokeLineCap,\n      strokeMiterLimit: this.strokeMiterLimit,\n      strokeLineJoin: this.strokeLineJoin,\n      strokeDashArray: this.strokeDashArray,\n    });\n\n    var position = new fabric.Point(\n      path.left + path.width / 2,\n      path.top + path.height / 2,\n    );\n    position = path.translateToGivenOrigin(\n      position,\n      \"center\",\n      \"center\",\n      path.originX,\n      path.originY,\n    );\n    path.top = position.y;\n    path.left = position.x;\n    if (this.shadow) {\n      this.shadow.affectStroke = true;\n      path.shadow = new fabric.Shadow(this.shadow);\n    }\n\n    return path;\n  },\n\n  _finalizeAndAddPath: function () {\n    var ctx = this.canvas.contextTop;\n    ctx.closePath();\n\n    if (this.drawStraightLine && this._points.length >= 2) {\n      const p1 = this._points[0];\n      const p2 = this._points[this._points.length - 1];\n      const avgPressure = (p1.pressure + p2.pressure) / 2;\n      this._points = [\n        new PSPoint(p1.x, p1.y, avgPressure),\n        new PSPoint(p2.x, p2.y, avgPressure),\n      ];\n    }\n\n    if (this.decimate) {\n      this._points = this.decimatePoints(this._points, this.decimate);\n    }\n\n    if (this.simplifyTolerance > 0 && !this.drawStraightLine) {\n      this.simplify.pressureCoeff = this.pressureCoeff;\n      this.simplify.tolerance = this.simplifyTolerance;\n      this._points = this.simplify.do(\n        this._points,\n        this.simplifyHighestQuality,\n      );\n    }\n\n    var pathData = this.convertPointsToSVGPath(this._points).join(\"\");\n    if (pathData === \"M 0 0 Q 0 0 0 0 L 0 0\") {\n      this.canvas.requestRenderAll();\n      return;\n    }\n\n    const path = this.createPSStroke(this._points);\n    path.opacity = this.opacity;\n    path.stroke = this.color;\n    path.strokeWidth = this.width;\n    path[\"startTime\"] = this.currentStartTime;\n    path[\"endTime\"] = Date.now();\n    this.canvas.clearContext(this.canvas.contextTop);\n    this.canvas.add(path);\n    path.setCoords();\n    this._resetShadow();\n\n    this.canvas.fire(\"path:created\", { path });\n  },\n});\n\nconst PSBrush = PSBrushImpl;\n\nfabric[\"PSBrush\"] = PSBrush;\nexport default PSBrush;\n","import PressureManager from \"./PressureManager\";\nimport PSBrush from \"./PSBrush\";\nimport PSPoint from \"./PSPoint\";\nimport PSStroke from \"./PSStroke\";\nimport Simplify from \"./Simplify\";\nexport * from \"./utils\";\n\nconsole.log(\"psbush\");\n\nexport { PressureManager, PSBrush, PSStroke, PSPoint, Simplify };\n"],"names":["createClass"],"mappings":"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"}